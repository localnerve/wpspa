<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Mocha Test Suite</title>
    <link rel="stylesheet" href="/vendor/bower/mocha/mocha.css" type="text/css" charset="utf-8" />
    <link rel="stylesheet" href="/app/styles/index.css"  type="text/css" charset="utf-8" />
    <script src="/vendor/js/modernizr/modernizr.js"></script>
</head>
<body>

    <!-- Required for browser reporter -->
    <div id="mocha"></div>

    <!-- Application Container -->
    <div id="app-container-test" style="visibility:hidden">        
        <div role="main" id="main"></div>
    </div>
    
    <!-- mocha -->
    <script src="/vendor/bower/mocha/mocha.js" type="text/javascript" charset="utf-8"></script>
    <script type="text/javascript" charset="utf-8">
        // This will be overridden by mocha-helper if you run with grunt
        mocha.setup('bdd');
    </script>

    <!-- Include your assertion lib of choice -->
    <script src="/vendor/bower/chai/chai.js" type="text/javascript" charset="utf-8"></script>
    <script type="text/javascript" charset="utf-8">
        // Setup chai
        var expect = chai.expect;
        var assert = chai.assert;
        var should = chai.should();
    </script>

    <!-- Include sinon spies, stubs, mocks, and sandbox -->
    <script src="/vendor/bower/sinon/lib/sinon.js" type="text/javascript" charset="utf-8"></script>
    <script src="/vendor/bower/sinon/lib/sinon/spy.js" type="text/javascript" charset="utf-8"></script>
    <script src="/vendor/bower/sinon/lib/sinon/call.js" type="text/javascript" charset="utf-8"></script>
    <script src="/vendor/bower/sinon/lib/sinon/stub.js" type="text/javascript" charset="utf-8"></script>
    <script src="/vendor/bower/sinon/lib/sinon/mock.js" type="text/javascript" charset="utf-8"></script>
    <script src="/vendor/bower/sinon/lib/sinon/collection.js" type="text/javascript" charset="utf-8"></script>
    <script src="/vendor/bower/sinon/lib/sinon/util/fake_timers.js" type="text/javascript" charset="utf-8"></script>
    <script src="/vendor/bower/sinon/lib/sinon/util/event.js" type="text/javascript" charset="utf-8"></script>
    <script src="/vendor/bower/sinon/lib/sinon/util/fake_xml_http_request.js" type="text/javascript" charset="utf-8"></script>
    <script src="/vendor/bower/sinon/lib/sinon/util/fake_server.js" type="text/javascript" charset="utf-8"></script>
    <script src="/vendor/bower/sinon/lib/sinon/util/fake_timers.js" type="text/javascript" charset="utf-8"></script>
    <script src="/vendor/bower/sinon/lib/sinon/util/fake_server_with_clock.js" type="text/javascript" charset="utf-8"></script>
    <script src="/vendor/bower/sinon/lib/sinon/sandbox.js" type="text/javascript" charset="utf-8"></script>

    <!-- Our test runner -->
    <script type="text/javascript" charset="utf-8">
        // Setup our global test harness
        var __test = (function() {

            // helper to get parameter names
            var STRIP_COMMENTS = /((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg;
            function getParamNames(func) {
                var fnStr = func.toString().replace(STRIP_COMMENTS, '');
                var result = fnStr.slice(fnStr.indexOf('(')+1, fnStr.indexOf(')')).match(/([^\s,]+)/g);
                if (result === null) {
                    result = [];
                }
                return result;
            }

            // Called on app exit (to not found) if called from test harness.
            // This is because the test harness is an invalid route.
            function testRunner(path, app) {

                // If we haven't been run
                if (!__test.app) {

                    // set the test exit handler
                    __test.exit = function(path) {
                        throw new Error("Unhandled application exit for '"+path+"'");
                    };

                    // set a reference to the app
                    __test.app = app;

                    // create standalone namespace
                    __test.standalone = {};
                    
                    // Ensure you point to where your tests are, base directory is app/, which
                    // is why ../test is necessary
                    require({ 
                      paths: { 
                        tests: "../test/mocha/tests"
                      }
                    }, [
                        // load all standalone modules for individual testing
                        "helpers/contract",
                        "components/layout/content/prefetch",
                        "helpers/backbone/sync",
                        "helpers/routes",
                        "helpers/urls",

                        // load all the tests
                        "tests/environment",
                        "tests/modernizr",
                        "tests/contract",
                        "tests/app",
                        "tests/router",
                        "tests/controller",
                        "tests/header.navigation",
                        "tests/content",
                        "tests/prefetch",
                        "tests/sync",
                        "tests/routes",
                        "tests/urls"
                        // next test suite here
                    ], 
                    // receive the standalone modules we explicitly want to reference
                    function(contract, prefetch, sync, routes, urls) {
                        var paramNames = getParamNames(arguments.callee);
                        var paramValues = Array.prototype.slice.call(arguments);

                        // make standalone modules available in the namespace
                        for (var i = 0; i < paramNames.length; i++) {
                            __test.standalone[paramNames[i]] = paramValues[i];
                        }

                        // tests and helpers loaded, run it!
                        mocha.run(function() {
                            // Don't navigate in the app for mocha anchors
                            $("#mocha a").attr("data-bypass", true);
                            // Remove the replay links, not supporting
                            $("#mocha a.replay").css("display", "none");
                        });
                    });
                } else {
                    __test.exit(path);
                }                
            }

            return testRunner;
        }());
    </script>

    <!-- load the application -->    
    <script data-main="../../app/config" src="/vendor/bower/requirejs/require.js"></script>

<script>var wpspa={"recent":{"status":"ok","count":2,"count_total":2,"pages":1,"posts":[{"id":63,"type":"post","slug":"another-test-post","url":"http://jsonapi.local/another-test-post/","status":"publish","title":"Another Test Post","title_plain":"Another Test Post","content":"<p>This is another test post</p>\n","excerpt":"<p>This is another test post</p>\n","date":"2013-08-25 20:30:16","modified":"2013-10-05 11:14:25","categories":[{"id":8,"slug":"another-category","title":"Another Category","description":"This is a test category to see what multiple categories look like","parent":0,"post_count":1},{"id":7,"slug":"my-test-category","title":"My Test Category","description":"This is a test category to see what the API results look like.","parent":0,"post_count":1}],"tags":[],"author":{"id":1,"slug":"jsonuser","name":"jsonuser","first_name":"","last_name":"","nickname":"jsonuser","url":"","description":""},"comments":[],"attachments":[],"comment_count":0,"comment_status":"open","custom_fields":{}},{"id":1,"type":"post","slug":"hello-world","url":"http://jsonapi.local/hello-world/","status":"publish","title":"Hello world!","title_plain":"Hello world!","content":"<p>Welcome to WordPress. This is your first post. Edit or delete it, then start blogging!</p>\n","excerpt":"<p>Welcome to WordPress. This is your first post. Edit or delete it, then start blogging!</p>\n","date":"2013-07-25 16:20:06","modified":"2013-07-25 16:20:06","categories":[],"tags":[],"author":{"id":1,"slug":"jsonuser","name":"jsonuser","first_name":"","last_name":"","nickname":"jsonuser","url":"","description":""},"comments":[{"id":1,"name":"Mr WordPress","url":"http://wordpress.org/","date":"2013-07-25 16:20:06","content":"<p>Hi, this is a comment.<br />\nTo delete a comment, just log in and view the post&#039;s comments. There you will have the option to edit or delete them.</p>\n","parent":0}],"attachments":[],"comment_count":1,"comment_status":"open","custom_fields":{}}]},"footer":{"status":"ok","sidebar_id":"sidebar-1","widgets":[{"id":"search-2","widget":"<aside id=\"search-2\" class=\"widget widget_search\"><form role=\"search\" method=\"get\" class=\"search-form\" action=\"http://jsonapi.local/\">\n\t\t\t\t<label>\n\t\t\t\t\t<span class=\"screen-reader-text\">Search for:</span>\n\t\t\t\t\t<input type=\"search\" class=\"search-field\" placeholder=\"Search &hellip;\" value=\"\" name=\"s\" title=\"Search for:\" />\n\t\t\t\t</label>\n\t\t\t\t<input type=\"submit\" class=\"search-submit\" value=\"Search\" />\n\t\t\t</form></aside>","params":{"name":"Main Widget Area","id":"sidebar-1","description":"Appears in the footer section of the site.","class":"","before_widget":"<aside id=\"search-2\" class=\"widget widget_search\">","after_widget":"</aside>","before_title":"<h3 class=\"widget-title\">","after_title":"</h3>","widget_id":"search-2","widget_name":"Search"},"instance":{"title":""}},{"id":"recent-posts-2","widget":"<aside id=\"recent-posts-2\" class=\"widget widget_recent_entries\">\t\t<h3 class=\"widget-title\">Recent Posts</h3>\t\t<ul>\n\t\t\t\t\t<li>\n\t\t\t\t<a href=\"http://jsonapi.local/another-test-post/\" title=\"Another Test Post\">Another Test Post</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t<li>\n\t\t\t\t<a href=\"http://jsonapi.local/hello-world/\" title=\"Hello world!\">Hello world!</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t</aside>","params":{"name":"Main Widget Area","id":"sidebar-1","description":"Appears in the footer section of the site.","class":"","before_widget":"<aside id=\"recent-posts-2\" class=\"widget widget_recent_entries\">","after_widget":"</aside>","before_title":"<h3 class=\"widget-title\">","after_title":"</h3>","widget_id":"recent-posts-2","widget_name":"Recent Posts"},"instance":{"title":"","number":5}},{"id":"recent-comments-2","widget":"<aside id=\"recent-comments-2\" class=\"widget widget_recent_comments\"><h3 class=\"widget-title\">Recent Comments</h3><ul id=\"recentcomments\"><li class=\"recentcomments\"><a href='http://wordpress.org/' rel='external nofollow' class='url'>Mr WordPress</a> on <a href=\"http://jsonapi.local/hello-world/#comment-1\">Hello world!</a></li></ul></aside>","params":{"name":"Main Widget Area","id":"sidebar-1","description":"Appears in the footer section of the site.","class":"","before_widget":"<aside id=\"recent-comments-2\" class=\"widget widget_recent_comments\">","after_widget":"</aside>","before_title":"<h3 class=\"widget-title\">","after_title":"</h3>","widget_id":"recent-comments-2","widget_name":"Recent Comments"},"instance":{"title":"","number":5}},{"id":"archives-2","widget":"<aside id=\"archives-2\" class=\"widget widget_archive\"><h3 class=\"widget-title\">Archives</h3>\t\t<ul>\n\t\t\t<li><a href='http://jsonapi.local/2013/08/' title='August 2013'>August 2013</a></li>\n\t<li><a href='http://jsonapi.local/2013/07/' title='July 2013'>July 2013</a></li>\n\t\t</ul>\n</aside>","params":{"name":"Main Widget Area","id":"sidebar-1","description":"Appears in the footer section of the site.","class":"","before_widget":"<aside id=\"archives-2\" class=\"widget widget_archive\">","after_widget":"</aside>","before_title":"<h3 class=\"widget-title\">","after_title":"</h3>","widget_id":"archives-2","widget_name":"Archives"},"instance":{"title":"","count":0,"dropdown":0}},{"id":"categories-2","widget":"<aside id=\"categories-2\" class=\"widget widget_categories\"><h3 class=\"widget-title\">Categories</h3>\t\t<ul>\n\t<li class=\"cat-item cat-item-8\"><a href=\"http://jsonapi.local/category/another-category/\" title=\"This is a test category to see what multiple categories look like\">Another Category</a>\n</li>\n\t<li class=\"cat-item cat-item-7\"><a href=\"http://jsonapi.local/category/my-test-category/\" title=\"This is a test category to see what the API results look like.\">My Test Category</a>\n</li>\n\t<li class=\"cat-item cat-item-1\"><a href=\"http://jsonapi.local/category/uncategorized/\" title=\"View all posts filed under Uncategorized\">Uncategorized</a>\n</li>\n\t\t</ul>\n</aside>","params":{"name":"Main Widget Area","id":"sidebar-1","description":"Appears in the footer section of the site.","class":"","before_widget":"<aside id=\"categories-2\" class=\"widget widget_categories\">","after_widget":"</aside>","before_title":"<h3 class=\"widget-title\">","after_title":"</h3>","widget_id":"categories-2","widget_name":"Categories"},"instance":{"title":"","count":0,"hierarchical":0,"dropdown":0}},{"id":"meta-2","widget":"<aside id=\"meta-2\" class=\"widget widget_meta\"><h3 class=\"widget-title\">Meta</h3>\t\t\t<ul>\n\t\t\t\t\t\t<li><a href=\"http://jsonapi.local/wp-login.php\">Log in</a></li>\n\t\t\t<li><a href=\"http://jsonapi.local/feed/\" title=\"Syndicate this site using RSS 2.0\">Entries <abbr title=\"Really Simple Syndication\">RSS</abbr></a></li>\n\t\t\t<li><a href=\"http://jsonapi.local/comments/feed/\" title=\"The latest comments to all posts in RSS\">Comments <abbr title=\"Really Simple Syndication\">RSS</abbr></a></li>\n\t\t\t<li><a href=\"http://wordpress.org/\" title=\"Powered by WordPress, state-of-the-art semantic personal publishing platform.\">WordPress.org</a></li>\t\t\t\t\t\t</ul>\n</aside>","params":{"name":"Main Widget Area","id":"sidebar-1","description":"Appears in the footer section of the site.","class":"","before_widget":"<aside id=\"meta-2\" class=\"widget widget_meta\">","after_widget":"</aside>","before_title":"<h3 class=\"widget-title\">","after_title":"</h3>","widget_id":"meta-2","widget_name":"Meta"},"instance":{"title":""}}]},"navigation":{"status":"ok","count":4,"count_total":4,"pages":1,"posts":[{"id":59,"type":"nav_menu_item","slug":"home","url":"http://jsonapi.local/home/","status":"publish","title":"Home","title_plain":"Home","content":"","excerpt":"","date":"2013-08-15 21:49:29","modified":"2013-10-01 17:49:39","categories":[],"tags":[],"author":{"id":1,"slug":"jsonuser","name":"jsonuser","first_name":"","last_name":"","nickname":"jsonuser","url":"","description":""},"comments":[],"attachments":[],"comment_count":0,"comment_status":"open","custom_fields":{"_menu_item_menu_item_parent":["0"],"_menu_item_wpspa_route":["/"],"_menu_item_wpspa_menu_text":["Home"],"_menu_item_wpspa_post_type":["recent"],"_menu_item_wpspa_object_id":["1"]}},{"id":60,"type":"nav_menu_item","slug":"60","url":"http://jsonapi.local/60/","status":"publish","title":"","title_plain":"","content":"","excerpt":"","date":"2013-08-15 21:49:29","modified":"2013-10-01 17:49:39","categories":[],"tags":[],"author":{"id":1,"slug":"jsonuser","name":"jsonuser","first_name":"","last_name":"","nickname":"jsonuser","url":"","description":""},"comments":[],"attachments":[],"comment_count":0,"comment_status":"open","custom_fields":{"_menu_item_menu_item_parent":["0"],"_menu_item_wpspa_route":["/sample-page"],"_menu_item_wpspa_menu_text":["Sample Page"],"_menu_item_wpspa_post_type":["page"],"_menu_item_wpspa_object_id":["2"]}},{"id":61,"type":"nav_menu_item","slug":"61","url":"http://jsonapi.local/61/","status":"publish","title":"","title_plain":"","content":"","excerpt":"","date":"2013-08-15 21:49:30","modified":"2013-10-01 17:49:39","categories":[],"tags":[],"author":{"id":1,"slug":"jsonuser","name":"jsonuser","first_name":"","last_name":"","nickname":"jsonuser","url":"","description":""},"comments":[],"attachments":[],"comment_count":0,"comment_status":"open","custom_fields":{"_menu_item_menu_item_parent":["0"],"_menu_item_wpspa_route":["/page-two"],"_menu_item_wpspa_menu_text":["Page Two"],"_menu_item_wpspa_post_type":["page"],"_menu_item_wpspa_object_id":["11"]}},{"id":68,"type":"nav_menu_item","slug":"68","url":"http://jsonapi.local/68/","status":"publish","title":"","title_plain":"","content":"","excerpt":"","date":"2013-10-01 17:47:03","modified":"2013-10-01 17:49:39","categories":[],"tags":[],"author":{"id":1,"slug":"jsonuser","name":"jsonuser","first_name":"","last_name":"","nickname":"jsonuser","url":"","description":""},"comments":[],"attachments":[],"comment_count":0,"comment_status":"open","custom_fields":{"_menu_item_menu_item_parent":["61"],"_menu_item_wpspa_route":["/page-two/page-two-subpage"],"_menu_item_wpspa_menu_text":["Page Two Subpage"],"_menu_item_wpspa_post_type":["page"],"_menu_item_wpspa_object_id":["66"]}}],"query":{"ignore_sticky_posts":true,"post_type":"nav_menu_item","order":"ASC","orderby":"menu_order","custom_fields":"_menu_item_menu_item_parent,_menu_item_wpspa_route,_menu_item_wpspa_menu_text,_menu_item_wpspa_post_type,_menu_item_wpspa_object_id"}}};</script></body>
</html>